<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iFactory - Hệ thống Quản lý Sản xuất</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <style>
        :root {
            --brand-primary: #0D47A1; --brand-primary-hover: #0B3A80; --brand-secondary: #E3F2FD;
            --text-primary: #1e293b; --text-secondary: #64748b;
            --bg: #f1f5f9; --panel: #ffffff; --text: var(--text-primary); --muted: var(--text-secondary);
            --primary: var(--brand-primary); --danger: #dc2626; --grid: #e5e7eb; --chip: var(--brand-secondary);
            --focus: #1d4ed8; --warning: #f59e0b; --success: #16a34a; --radius: 10px;
            --shadow: 0 4px 12px rgba(0,0,0,.08); --station-h: 72px; --track-h: 56px; --col-w: 80px;
        }
        
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--text); }
        .app-container { display: flex; height: 100vh; }
        .sidebar { background-color: var(--brand-primary); transition: width 0.3s ease-in-out; }
        .sidebar-link { display: flex; align-items: center; padding: 0.75rem 1.25rem; white-space: nowrap; border-radius: 0.375rem; color: #BBDEFB; transition: all 0.2s; font-weight: 500; }
        .sidebar-link:hover { background-color: var(--brand-primary-hover); color: #ffffff; }
        .sidebar-link.active { background-color: #ffffff; color: var(--brand-primary); font-weight: 600; }
        .sidebar-link i { font-size: 1.25rem; margin-right: 0.75rem; flex-shrink: 0; }
        
        .sidebar-collapsed .sidebar { width: 80px; }
        .sidebar-collapsed .sidebar-link span, .sidebar-collapsed .sidebar-header-text, .sidebar-collapsed .user-info, .sidebar-collapsed .config-header { display: none; }
        .sidebar-collapsed .sidebar-link, .sidebar-collapsed .sidebar-header { justify-content: center; }
        .sidebar-collapsed .sidebar-link i { margin-right: 0; }

        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .schedule-view { display: none; }
        .schedule-view.active { display: block; }
        
        .tab-btn { padding: 0.75rem 1rem; font-size: 0.875rem; font-weight: 600; border-bottom: 2px solid transparent; color: var(--text-secondary); cursor: pointer; }
        .tab-btn.active { color: var(--brand-primary); border-bottom-color: var(--brand-primary); }

        .panel { background: var(--panel); border-radius: var(--radius); box-shadow: var(--shadow); padding: 16px; margin-bottom: 16px; border: 1px solid var(--grid); }
        .field{display:flex;flex-direction:column;gap:6px}
        .label{font-size:12px;color:var(--muted)}
        .input, .select{ height:36px;border:1px solid #d1d5db;border-radius:8px;padding:0 10px;background:#fff; outline:none; font-size: 14px; }
        .input:focus, .select:focus{border-color:var(--focus);box-shadow:0 0 0 3px rgba(29,78,216,.15)}
        .toolbar{ display:flex;align-items:center;justify-content:space-between;margin-top:16px;gap:12px;flex-wrap:wrap; }
        .left, .right{display:flex;align-items:center;gap:8px}
        .btn{ height:36px;padding:0 12px;border-radius:8px;border:1px solid #d1d5db;background:#fff;cursor:pointer; display:inline-flex;align-items:center;gap:8px;font-weight:600; }
        .btn.primary{background:var(--primary);border-color:var(--primary);color:#fff}
        .btn.danger{background:var(--danger);border-color:var(--danger);color:#fff}
        .btn.ghost{background:transparent;border-color:transparent;color:#374151}
        .segmented{ display:inline-flex;border:1px solid #d1d5db;border-radius:10px;overflow:hidden; }
        .segmented button{ height:36px;padding:0 12px;border:0;background:#fff;cursor:pointer;font-weight:600; }
        .segmented button.active{background:var(--chip);color:var(--focus)}
        .date{ display:inline-flex;align-items:center;gap:4px;border:1px solid #d1d5db;border-radius:8px;height:36px;background:#fff; }
        .date input { border: none !important; box-shadow: none !important; text-align: center; }
        
        .schedule{ background:var(--panel);border-radius:var(--radius);box-shadow:var(--shadow); overflow:hidden; border: 1px solid var(--grid); }
        .schedule-head{ display:grid; grid-template-columns:240px 1fr; border-bottom:1px solid var(--grid); background: #f8fafc; }
        .stations-head{ padding:12px 16px;font-weight:700;color:#1f2937;border-right:1px solid var(--grid); }
        .timehead{ position:relative;overflow:hidden;white-space:nowrap; }
        .time-grid{ display:flex;position:relative; }
        .time-col{ width:var(--col-w);min-width:var(--col-w);border-left:1px solid var(--grid); padding:8px 0;text-align:center;color:var(--muted);font-size:12px; }
        .schedule-body{ display:grid;grid-template-columns:240px 1fr;max-height:66vh;overflow:auto; }
        .stations{ border-right:1px solid var(--grid);background:#fdfdff; }
        .station{ height:var(--station-h);display:flex;align-items:center;gap:8px;padding:0 16px;border-bottom:1px solid var(--grid); }
        .badge{ background:var(--chip);color:#3730a3;font-weight:700;border-radius:999px;padding:4px 10px;font-size:12px; }
        .station-sub{color:var(--muted);font-size:12px}
        
        .tracks{ position:relative; }
        .track{ position:relative;height:var(--station-h);border-bottom:1px solid var(--grid); }
        .track-timeline { background: repeating-linear-gradient( to right, transparent 0 calc(var(--col-w) - 1px), #f6f8fb calc(var(--col-w) - 1px) var(--col-w)); }
        .track.drop-hover { background-color: #e0e7ff; }
        .unscheduled-track { display: flex; flex-wrap: wrap; align-content: flex-start; gap: 8px; padding: 8px; min-height: var(--station-h); }

        .now{ position:absolute;top:0;bottom:0;width:2px;background:var(--danger);box-shadow:0 0 0 2px rgba(220,38,38,.15); z-index:5;pointer-events:none; }
        
        .order { position:absolute;height:var(--track-h);top:8px;border-radius:8px;display:flex;align-items:center; padding:8px 10px;gap:8px;color:#fff;font-weight:600;box-shadow:0 4px 14px rgba(0,0,0,.15);cursor:pointer; user-select: none; }
        .order.dragging { opacity: 0.5; }
        
        .order.blue{background:linear-gradient(135deg,#2563eb,#1d4ed8)}
        .order.red{background:linear-gradient(135deg,#ef4444,#dc2626)}
        .order.yellow{background:linear-gradient(135deg,#f59e0b,#d97706)}
        .order.green{background:linear-gradient(135deg,#16a34a,#15803d)}
        .order.grey {background:linear-gradient(135deg,#94a3b8,#64748b)}
        
        .modal { background-color: rgba(0,0,0,0.5); z-index: 100; }
        .modal-content { animation: slideInUp 0.3s ease-out; }
        @keyframes slideInUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .status-badge { padding: 4px 10px; border-radius: 999px; font-size: 11px; font-weight: 700; text-align: center; display: inline-block; }
        .status-badge.grey { background-color: #f1f5f9; color: #475569; border: 1px solid #e2e8f0; }
        .status-badge.blue { background-color: #dbeafe; color: #2563eb; }
        .status-badge.yellow { background-color: #fef9c3; color: #ca8a04; }
        .status-badge.red { background-color: #fee2e2; color: #dc2626; }
        .status-badge.green { background-color: #dcfce7; color: #16a34a; }
        
        .plan-table th, .work-schedule-table th { padding: 8px 12px; }
        .plan-table td, .work-schedule-table td { padding: 10px 12px; white-space: nowrap; }
        .plan-table .month-row { cursor: pointer; }
        .plan-table .month-row:hover { background-color: #f8fafc; }
        .plan-table .month-row i { transition: transform 0.2s; }
        .plan-table .month-row.collapsed i { transform: rotate(-90deg); }
        .plan-table .metric-row-l2 { padding-left: 2.5rem !important; }
        .plan-table .metric-row-l3 { padding-left: 4rem !important; }
        .plan-table .total-row td { font-weight: 700; color: var(--brand-primary); }
    </style>
</head>
<body class="">

    <div class="app-container">
        <aside class="sidebar w-64 text-white p-4 flex flex-col shrink-0">
            <div class="sidebar-header flex items-center mb-10">
                <i class="ph-bold ph-factory text-3xl text-white"></i>
                <span class="sidebar-header-text text-2xl font-bold ml-2">iFactory</span>
            </div>
            <nav class="flex flex-col space-y-2">
                <a href="#" class="sidebar-link" data-page="dashboard"><i class="ph ph-gauge"></i><span class="link-text">Dashboard</span></a>

                <div>
                    <span class="config-header px-5 pt-6 pb-2 text-xs font-semibold text-blue-200 uppercase tracking-wider">Cấu hình</span>
                    <div class="flex flex-col space-y-2 mt-2">
                        <a href="#" class="sidebar-link" data-page="item-master"><i class="ph ph-package"></i><span class="link-text">Danh mục hàng hóa</span></a>
                        <a href="#" class="sidebar-link" data-page="bom-config"><i class="ph ph-list-bullets"></i><span class="link-text">Cấu hình BOM</span></a>
                        <a href="#" class="sidebar-link" data-page="station-config"><i class="ph ph-robot"></i><span class="link-text">Cấu hình Trạm SX</span></a>
                        <a href="#" class="sidebar-link" data-page="inventory-update"><i class="ph ph-stack"></i><span class="link-text">Cập nhật tồn kho</span></a>
                    </div>
                </div>

                <div>
                    <span class="config-header px-5 pt-6 pb-2 text-xs font-semibold text-blue-200 uppercase tracking-wider">Kế hoạch sản xuất</span>
                    <div class="flex flex-col space-y-2 mt-2">
                        <a href="#" class="sidebar-link" data-page="production-plan"><i class="ph ph-calendar-plus"></i><span class="link-text">Kế hoạch sản xuất</span></a>
                        <a href="#" class="sidebar-link active" data-page="order-list"><i class="ph ph-notepad"></i><span class="link-text">Lệnh sản xuất</span></a>
                        <a href="#" class="sidebar-link" data-page="scheduling"><i class="ph ph-calendar-check"></i><span class="link-text">Lập lịch sản xuất</span></a>
                    </div>
                </div>
            </nav>
            <div class="mt-auto">
                <div class="user-profile flex items-center p-3 bg-black bg-opacity-20 rounded-lg">
                    <img src="https://placehold.co/40x40/BBDEFB/0D47A1?text=QM" alt="Avatar" class="rounded-full flex-shrink-0">
                    <div class="user-info ml-3"><p class="font-semibold text-sm text-white">Quang Minh</p><p class="text-xs text-blue-200">Quản lý Sản xuất</p></div>
                </div>
                <button id="sidebarToggle" class="w-full mt-4 flex items-center justify-center p-2 rounded-lg hover:bg-black hover:bg-opacity-20 transition-colors">
                    <i class="ph ph-caret-double-left text-xl"></i>
                </button>
            </div>
        </aside>

        <main class="flex-1 p-6 overflow-y-auto">

            <div id="dashboard" class="page">
                 </div>
            <div id="scheduling" class="page">
                 </div>
            
            <div id="order-list" class="page active">
                 <h1 class="text-3xl font-bold text-text-primary mb-2">Danh Sách Lệnh Sản Xuất</h1>
                 <p class="text-text-secondary mb-6">Quản lý, theo dõi và thực hiện các thao tác trên tất cả lệnh sản xuất.</p>
                
                 <div class="panel">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                        <div class="field md:col-span-2">
                            <label class="label">Tìm kiếm</label>
                            <input type="search" id="orderListSearch" class="input w-full" placeholder="Tìm theo mã lệnh, tên sản phẩm...">
                        </div>
                        <div class="field">
                            <label class="label">Trạng thái</label>
                            <select id="orderListStatusFilter" class="select">
                                <option value="all">Tất cả trạng thái</option>
                                <option value="unscheduled">Chưa xếp lịch</option>
                                <option value="grey">Chưa bắt đầu</option>
                                <option value="blue">Đang thực hiện</option>
                                <option value="yellow">Cảnh báo</option>
                                <option value="red">Chậm tiến độ</option>
                                <option value="green">Hoàn thành</option>
                            </select>
                        </div>
                        <div class="field">
                            <label class="label">Trạm sản xuất</label>
                            <select id="orderListStationFilter" class="select">
                                </select>
                        </div>
                    </div>
                 </div>

                 <div class="panel !p-0">
                     <div class="p-4 flex justify-between items-center">
                        <div>
                            <h2 class="text-lg font-semibold text-text-primary">Danh sách</h2>
                            <p class="text-sm text-slate-500 mt-1">Đã tìm thấy <span id="orderListCount" class="font-bold text-slate-700">0</span> lệnh sản xuất.</p>
                        </div>
                         <button class="btn primary" id="addNewOrderFromListBtn">
                             <i class="ph ph-plus"></i>
                             <span>Thêm Lệnh Mới</span>
                         </button>
                     </div>
                     <div class="overflow-x-auto">
                         <table class="w-full text-sm text-left">
                             <thead class="bg-slate-50 text-slate-600 uppercase text-xs">
                                 <tr>
                                     <th class="p-3 font-semibold">Mã Lệnh</th>
                                     <th class="p-3 font-semibold">Sản phẩm</th>
                                     <th class="p-3 font-semibold text-right">Số lượng</th>
                                     <th class="p-3 font-semibold">Trạm SX</th>
                                     <th class="p-3 font-semibold">Bắt đầu</th>
                                     <th class="p-3 font-semibold">Kết thúc</th>
                                     <th class="p-3 font-semibold text-center">Trạng thái</th>
                                     <th class="p-3 font-semibold text-center">Hành động</th>
                                 </tr>
                             </thead>
                             <tbody id="orderListTableBody" class="divide-y divide-slate-200">
                                  <tr><td colspan="8" class="text-center p-10 text-slate-500">Đang tải dữ liệu...</td></tr>
                             </tbody>
                         </table>
                     </div>
                     <div class="p-4 border-t flex justify-end items-center text-sm">
                        <div class="flex items-center gap-2">
                            <button class="btn !h-8 !px-2"><i class="ph ph-caret-left"></i></button>
                            <span>Trang <span class="font-bold">1</span> / <span class="font-bold">1</span></span>
                            <button class="btn !h-8 !px-2"><i class="ph ph-caret-right"></i></button>
                        </div>
                     </div>
                 </div>
            </div>
            <div id="production-plan" class="page">
                 </div>
             <div id="bom-config" class="page">
                 </div>
             <div id="station-config" class="page">
                </div>
             <div id="item-master" class="page">
                </div>
             <div id="inventory-update" class="page">
                 </div>
        </main>
    </div>

    <div id="orderFormModal" class="modal fixed inset-0 flex items-center justify-center hidden">
        </div>


    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- DATA MODELS (Dữ liệu mẫu) ---
        let stationsData = [
            { id:'TSX-01', name:'Trạm tiền xử lý 1', workshop: 'PX1', efficiency: 95, capacity: 100, scheduleId: '3CA' },
            { id:'TSX-02', name:'Trạm tiền xử lý 2', workshop: 'PX1', efficiency: 90, capacity: 80, scheduleId: '3CA' },
            { id:'TSX-03', name:'Trạm lắp ráp A', workshop: 'PX2', efficiency: 98, capacity: 110, scheduleId: '3CA' },
            { id:'TSX-04', name:'Trạm KCS', workshop: 'PX2', efficiency: 100, capacity: 200, scheduleId: 'HC' },
            { id:'UNS-01', name:'Chưa xếp lịch', workshop: 'N/A', unscheduled: true },
        ];
        
        let productsData = [
            { code: 'SP-A', name: 'Vỏ máy Standard'},
            { code: 'SP-C', name: 'Khung máy Pro'},
            { code: 'SP-D', name: 'Sản phẩm D'},
            { code: 'SP-E', name: 'Sản phẩm E'},
            { code: 'SP-F', name: 'Sản phẩm F'},
            { code: 'SP-G', name: 'Sản phẩm G'},
        ];

        let ordersData = [
            { id:'DH-0001', station:'TSX-01', start: 7*60+30, end: 11*60, status:'blue', product:'SP-A', qty:800 },
            { id:'DH-0004', station:'TSX-02', start: 14*60, end: 16*60, status:'red', product:'SP-C', qty:450, reason:'Thiếu NVL' },
            { id:'DH-0007', station:'UNS-01', start: 0, end: 0, status:'grey', product:'SP-D', qty:300 },
            { id:'DH-0008', station:'TSX-02', start: 9*60, end: 12*60, status:'yellow', product:'SP-E', qty:200, reason: 'Chờ kiểm tra' },
            { id:'DH-0009', station:'TSX-03', start: 6*60, end: 9*60, status:'green', product:'SP-F', qty:1000 },
            { id:'DH-0010', station:'TSX-01', start: 20*60, end: 22*60, status:'grey', product:'SP-G', qty:250 },
            { id:'DH-0011', station:'UNS-01', start: 0, end: 0, status:'grey', product:'SP-A', qty:500 },
            { id:'DH-0012', station:'TSX-04', start: 8*60, end: 10*60, status:'green', product:'SP-C', qty:150 },
        ];

        const fmtTime = min => min > 0 ? `${String(Math.floor(min/60)%24).padStart(2,'0')}:${String(min%60).padStart(2,'0')}` : '---';

        // --- GLOBAL SELECTORS ---
        const getEl = id => document.getElementById(id);

        // --- RENDER FUNCTIONS (DECLARE ALL) ---
        let renderAll, renderOrderList; // (Các hàm render khác được giữ nguyên)

        // --- NAVIGATION & SIDEBAR LOGIC (GIỮ NGUYÊN) ---
        // ... (code điều hướng không thay đổi)

        // --- MODAL HANDLING (GIỮ NGUYÊN) ---
        // ... (code xử lý modal không thay đổi)


        // ##### BẮT ĐẦU PHẦN LOGIC ĐƯỢC CẬP NHẬT CHO TRANG "LỆNH SẢN XUẤT" #####

        const orderListSearchInput = getEl('orderListSearch');
        const orderListStatusFilter = getEl('orderListStatusFilter');
        const orderListStationFilter = getEl('orderListStationFilter');
        const orderListCount = getEl('orderListCount');
        const orderListTableBody = getEl('orderListTableBody');
        
        // --- CẬP NHẬT HÀM renderOrderList ---
        renderOrderList = () => {
            if (!orderListTableBody) return;

            // Lấy giá trị từ các bộ lọc
            const searchTerm = orderListSearchInput.value.toLowerCase();
            const statusFilter = orderListStatusFilter.value;
            const stationFilter = orderListStationFilter.value;

            const statusMap = { 
                grey: { text: 'Chưa bắt đầu', class: 'grey' }, 
                blue: { text: 'Đang thực hiện', class: 'blue' }, 
                yellow: { text: 'Cảnh báo', class: 'yellow' }, 
                red: { text: 'Chậm tiến độ', class: 'red' }, 
                green: { text: 'Hoàn thành', class: 'green' } 
            };
            
            // Lọc dữ liệu dựa trên các điều kiện
            const filteredOrders = ordersData.filter(order => {
                const productInfo = productsData.find(p => p.code === order.product);
                const searchMatch = searchTerm === '' || 
                                    order.id.toLowerCase().includes(searchTerm) || 
                                    (productInfo && productInfo.name.toLowerCase().includes(searchTerm));
                
                let statusMatch = statusFilter === 'all';
                if (!statusMatch) {
                    const station = stationsData.find(s => s.id === order.station);
                    if (statusFilter === 'unscheduled') {
                        statusMatch = station?.unscheduled;
                    } else {
                        statusMatch = order.status === statusFilter && !station?.unscheduled;
                    }
                }

                const stationMatch = stationFilter === 'all' || order.station === stationFilter;

                return searchMatch && statusMatch && stationMatch;
            });

            // Cập nhật bộ đếm
            orderListCount.textContent = filteredOrders.length;
            
            // Render ra bảng
            orderListTableBody.innerHTML = '';
            if (filteredOrders.length === 0) {
                orderListTableBody.innerHTML = `<tr><td colspan="8" class="text-center p-10 text-slate-500">Không tìm thấy lệnh sản xuất nào.</td></tr>`;
                return;
            }

            filteredOrders.forEach(order => {
                const station = stationsData.find(s => s.id === order.station);
                const product = productsData.find(p => p.code === order.product);

                let statusInfo = statusMap[order.status] || { text: 'Không xác định', class: 'grey' };
                if (station?.unscheduled) { 
                    statusInfo = { text: 'Chưa xếp lịch', class: 'grey' }; 
                }

                const row = document.createElement('tr');
                row.className = 'hover:bg-slate-50';
                row.innerHTML = `
                    <td class="p-3">
                        <p class="font-semibold text-slate-800">${order.id}</p>
                        ${order.reason ? `<p class="text-xs text-red-600 mt-1 italic">${order.reason}</p>` : ''}
                    </td>
                    <td class="p-3">
                        <p class="font-semibold">${product ? product.name : 'N/A'}</p>
                        <p class="text-xs text-slate-500 font-mono">[${order.product}]</p>
                    </td>
                    <td class="p-3 text-right font-mono">${order.qty.toLocaleString('vi-VN')}</td>
                    <td class="p-3">${station ? `${station.name} ${station.workshop !== 'N/A' ? `(${station.workshop})` : ''}` : 'N/A'}</td>
                    <td class="p-3 font-mono">${fmtTime(order.start)}</td>
                    <td class="p-3 font-mono">${fmtTime(order.end)}</td>
                    <td class="p-3 text-center"><span class="status-badge ${statusInfo.class}">${statusInfo.text}</span></td>
                    <td class="p-3 text-center">
                        <div class="flex items-center justify-center gap-2">
                            <button class="btn !h-8 !px-2 edit-order-btn" data-id="${order.id}" title="Sửa lệnh"><i class="ph ph-pencil-simple"></i></button>
                            <button class="btn !h-8 !px-2 !text-red-600 hover:!border-red-600 delete-order-btn" data-id="${order.id}" title="Xóa lệnh"><i class="ph ph-trash"></i></button>
                        </div>
                    </td>
                `;
                orderListTableBody.appendChild(row);
            });
           
            // Gắn sự kiện cho các nút SỬA mới được tạo
            orderListTableBody.querySelectorAll('.edit-order-btn').forEach(btn => {
                btn.addEventListener('click', () => openOrderModal(btn.dataset.id)); 
            });

            // Gắn sự kiện cho các nút XÓA mới được tạo
            orderListTableBody.querySelectorAll('.delete-order-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const orderId = btn.dataset.id;
                    if (confirm(`Bạn có chắc chắn muốn xóa Lệnh Sản Xuất "${orderId}" không?`)) {
                        ordersData = ordersData.filter(o => o.id !== orderId);
                        renderAll(); // Render lại tất cả các view để đồng bộ dữ liệu
                    }
                });
            });
        };
        
        // --- HÀM KHỞI TẠO BỘ LỌC ---
        const initializeFilters = () => {
            // Tạo options cho bộ lọc Trạm sản xuất
            orderListStationFilter.innerHTML = '<option value="all">Tất cả trạm</option>';
            stationsData.forEach(station => {
                orderListStationFilter.innerHTML += `<option value="${station.id}">${station.name}</option>`;
            });

            // Gắn sự kiện cho các bộ lọc
            [orderListSearchInput, orderListStatusFilter, orderListStationFilter].forEach(el => {
                el.addEventListener('input', renderOrderList);
            });
        };
        
        // --- ORDER FORM MODAL LOGIC (GIỮ NGUYÊN) ---
        const openOrderModal = (orderId = null) => {
           // ... (code xử lý modal không thay đổi)
        };
        getEl('addNewOrderFromListBtn')?.addEventListener('click', () => openOrderModal());

        // ##### KẾT THÚC PHẦN LOGIC ĐƯỢC CẬP NHẬT #####

        
        // --- INITIAL RENDER ---
        renderAll = () => {
            // renderTracksAndStations();
            // renderUnscheduled();
            // renderKanbanBoard();
            renderOrderList();
            // renderProductionPlan();
            // renderStationList();
            // renderProductList();
        };
        
        // Khởi tạo các bộ lọc và render lần đầu
        initializeFilters();
        renderAll();

    });
    </script>
</body>
</html>
